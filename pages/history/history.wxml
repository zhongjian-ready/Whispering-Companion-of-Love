<view class="container">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="card stats-card">
    <view class="title">é¥®æ°´ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-value">{{todayDrink}}ml</view>
        <view class="stat-label">ä»Šæ—¥é¥®æ°´</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{weekAverage}}ml</view>
        <view class="stat-label">æœ¬å‘¨å¹³å‡</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{totalDays}}</view>
        <view class="stat-label">åšæŒå¤©æ•°</view>
      </view>
      <view class="stat-item">
        <view class="stat-value">{{goalRate}}%</view>
        <view class="stat-label">ç›®æ ‡è¾¾æˆç‡</view>
      </view>
    </view>
  </view>

  <!-- æ—¥æœŸé€‰æ‹© -->
  <view class="card">
    <view class="flex-between mb-20">
      <view class="title">å†å²è®°å½•</view>
      <picker mode="date" value="{{selectedDate}}" bindchange="onDateChange">
        <button class="btn-secondary">{{selectedDate}}</button>
      </picker>
    </view>
    
    <!-- å½“æ—¥ç»Ÿè®¡ -->
    <view class="day-summary">
      <view class="flex-between">
        <view class="day-total">{{selectedDayTotal}}ml</view>
        <view class="day-status {{selectedDayTotal >= dailyGoal ? 'completed' : 'incomplete'}}">
          {{selectedDayTotal >= dailyGoal ? 'å·²å®Œæˆ' : 'æœªå®Œæˆ'}}
        </view>
      </view>
      <view class="day-progress">
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{selectedDayPercent}}%"></view>
        </view>
        <view class="progress-text">{{selectedDayPercent}}%</view>
      </view>
    </view>
  </view>

  <!-- å½“æ—¥è¯¦ç»†è®°å½• -->
  <view class="card" wx:if="{{selectedDayRecords.length > 0}}">
    <view class="title">{{selectedDate}} è¯¦ç»†è®°å½•</view>
    <view class="record-list">
      <view 
        class="record-item flex-between" 
        wx:for="{{selectedDayRecords}}" 
        wx:key="index"
      >
        <view class="record-info">
          <view class="record-amount">{{item.amount}}ml</view>
          <view class="record-time text-light">{{item.time}}</view>
        </view>
        <view class="record-note" wx:if="{{item.note}}">{{item.note}}</view>
      </view>
    </view>
  </view>

  <!-- æ²¡æœ‰è®°å½•çš„æç¤º -->
  <view class="card empty-state" wx:if="{{selectedDayRecords.length === 0}}">
    <view class="empty-icon">ğŸ“Š</view>
    <view class="empty-text">{{selectedDate}} æš‚æ— é¥®æ°´è®°å½•</view>
    <view class="empty-desc">å¼€å§‹è®°å½•æ‚¨çš„é¥®æ°´ä¹ æƒ¯å§ï¼</view>
  </view>

  <!-- 7å¤©è¶‹åŠ¿å›¾ -->
  <view class="card">
    <view class="title">7å¤©é¥®æ°´è¶‹åŠ¿</view>
    <view class="chart-container">
      <view class="chart">
        <view 
          class="chart-bar" 
          wx:for="{{weeklyData}}" 
          wx:key="date"
          style="height: {{item.percent}}%"
        >
          <view class="bar-value">{{item.amount}}</view>
        </view>
      </view>
      <view class="chart-labels">
        <view 
          class="chart-label" 
          wx:for="{{weeklyData}}" 
          wx:key="date"
        >
          {{item.label}}
        </view>
      </view>
    </view>
  </view>

  <!-- æˆå°±å¡ç‰‡ -->
  <view class="card achievement-card" wx:if="{{achievements.length > 0}}">
    <view class="title">ğŸ† æˆå°±è§£é”</view>
    <view class="achievement-list">
      <view 
        class="achievement-item" 
        wx:for="{{achievements}}" 
        wx:key="id"
      >
        <view class="achievement-icon">{{item.icon}}</view>
        <view class="achievement-info">
          <view class="achievement-name">{{item.name}}</view>
          <view class="achievement-desc text-light">{{item.description}}</view>
        </view>
      </view>
    </view>
  </view>
</view>
